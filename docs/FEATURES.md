# 功能详细说明文档

## 一、标签筛选功能

### 使用方法

1. **选择分类**：点击分类标签（全部、唐代、宋代、五言诗、七言诗、词）
2. **选择标签**：选择分类后，可选择相关标签进行筛选
3. **清除筛选**：点击"清除筛选"按钮重置所有条件

### 技术实现

- **分类筛选逻辑**：根据朝代、诗体类型进行筛选
- **标签筛选逻辑**：根据诗词标签进行匹配
- **事件传递**：通过 `updateResults` 事件向上传递筛选结果

### 排查步骤

1. 检查控制台错误信息
2. 确认数据文件格式正确
3. 检查事件绑定是否正确
4. 验证筛选逻辑匹配

## 二、API集成情况

### 已集成的API

**今日诗词API**（v2版本）
- 端点：`https://v2.jinrishici.com/one.json`
- 功能：获取每日推荐诗词
- 特点：完全免费，无需注册

### 备用数据

本地JSON文件包含：
- 20首经典诗词
- 6位著名诗人
- 5个分类
- 10个标签

## 三、"换一句"功能

### 功能说明

- **位置**：诗词卡片右上角
- **操作**：点击按钮刷新诗词
- **反馈**：按钮显示加载状态
- **样式**：渐变色背景，与整体风格一致

### 实现原理

1. 按钮点击触发 `change` 事件
2. 父组件监听事件并调用 `fetchPoetry()`
3. 显示加载动画防止重复点击

## 四、诗词详细解释

### 包含内容

1. **诗词背景**：诗词创作背景和缘由
2. **作者简介**：作者生平和代表作品
3. **重点字词注释**：关键词汇的解释
4. **意境解析**：诗词意境和艺术特色
5. **情感基调**：诗词表达的情感

### 交互设计

- **展开/收起**：点击按钮切换显示
- **平滑动画**：过渡动画提升体验
- **网络搜索**：未收录诗词可搜索网络资源

## 五、诗词库功能

### 核心功能

1. **诗词搜索**
   - 标题搜索
   - 作者搜索
   - 内容搜索
   - 标签搜索

2. **分类筛选**
   - 按朝代筛选
   - 按诗体筛选
   - 组合筛选

3. **分页功能**
   - 每页12首诗词
   - 页码导航
   - 平滑滚动

4. **网络搜索**
   - 本地未匹配时自动联网搜索
   - 实时获取网络诗词资源

### 技术特点

- **响应式设计**：完美适配各种设备
- **性能优化**：分页加载减少DOM节点
- **用户体验**：加载状态和空状态提示

## 六、多页面架构

### 页面结构

1. **首页** (`/`)
   - 每日推荐诗词
   - 热门推荐
   - 著名诗人
   - 浏览历史

2. **诗词库** (`/library`)
   - 诗词列表
   - 搜索筛选
   - 分页功能

3. **诗词详情** (`/poetry/:id`)
   - 诗词全文
   - 详细解释
   - 相关推荐

4. **收藏** (`/favorites`)
   - 我的收藏
   - 取消收藏
   - 快速查看

### 路由配置

使用 Vue Router 4：
- 路由模式：history
- 滚动行为：返回顶部
- 过渡动画：淡入淡出

## 七、数据管理

### 本地存储

1. **浏览历史**：localStorage存储，最多20条
2. **用户收藏**：localStorage存储，无限制
3. **主题偏好**：localStorage存储

### 数据结构

```typescript
interface Poetry {
  id: string;
  title: string;
  content: string[];
  author: string;
  dynasty: string;
  tags?: string[];
  category?: string;
}

interface Author {
  name: string;
  dynasty: string;
  bio: string;
  famousWorks: string[];
}
```

## 八、性能优化

### 已优化项

1. **代码分割**：按页面路由分割代码
2. **图片优化**：使用WebP格式
3. **缓存策略**：localStorage缓存常用数据
4. **懒加载**：路由组件懒加载

### 监控指标

- 首屏加载时间 < 1s
- 交互响应时间 < 100ms
- 页面切换时间 < 300ms

## 九、可访问性

### 已实现

1. **键盘导航**：支持Tab键导航
2. **焦点状态**：明显的焦点指示器
3. **语义化HTML**：使用语义化标签
4. **ARIA标签**：为交互元素添加ARIA标签
5. **颜色对比度**：符合WCAG 2.1标准

### 测试工具

- Lighthouse审计
- WAVE评估
- axe DevTools

## 十、未来扩展

### 计划功能

1. **用户系统**
   - 用户注册/登录
   - 云端收藏同步
   - 学习进度记录

2. **社交功能**
   - 诗词分享
   - 评论互动
   - 用户社区

3. **学习功能**
   - 诗词背诵
   - 词汇测验
   - 学习统计

4. **内容扩展**
   - 更多诗词资源
   - 诗词朗诵音频
   - 视频讲解

### 技术升级

- 服务端渲染（SSR）
-  Progressive Web App（PWA）
-  GraphQL API
-  微服务架构